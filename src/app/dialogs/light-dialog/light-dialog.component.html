<form [formGroup]="form">
  <h1 mat-dialog-title>{{dialogTitle}}</h1>
  <div *ngIf="loading; else createForm">
    <mat-progress-bar mode="indeterminate"></mat-progress-bar>
  </div>
  <ng-template #createForm>
    <div mat-dialog-content>
      <div>
        <mat-form-field>
          <mat-label>Name</mat-label>
          <input
          required
          type="text"
          matInput
          placeholder="Some Greenhouse"
          formControlName="name">
        </mat-form-field>
  
        <mat-form-field>
          <mat-label>Report Interval (Seconds)</mat-label>
          <input
          required
          range
          [minValue]="30"
          type="number"
          matInput
          placeholder="Seconds (200)"
          formControlName="reportIntervalSeconds">
        </mat-form-field>
      </div>

      <div>
        <mat-form-field>
          <mat-label>Permissible Light Value</mat-label>
          <input
          required
          range
          [minValue]="0"
          type="number"
          matInput
          formControlName="permissibleLightValue">
        </mat-form-field>
  
        <mat-form-field>
          <mat-label>Lighting Seconds</mat-label>
          <input
          required
          range
          [minValue]="30"
          type="number"
          matInput
          formControlName="lightingSeconds">
        </mat-form-field>
      </div>

    </div>  
    <div *ngIf="form.touched && form.invalid" class="error">
      <span *ngIf="f.name.touched && f.name.invalid">
        Name is required.
      </span>
      <div *ngIf="f.reportIntervalSeconds.touched && f.reportIntervalSeconds.errors">
        <span *ngIf="f.reportIntervalSeconds.errors.required">
          Report Interval is required.
        </span>
        <span *ngIf="f.reportIntervalSeconds.errors.range">
          Report Interval min value is {{f.reportIntervalSeconds.errors.data.minValue}}.
        </span>
      </div>
      <div *ngIf="f.permissibleLightValue.touched && f.permissibleLightValue.errors">
        <span *ngIf="f.permissibleLightValue.errors.required">
          Permissible light is required.
        </span>
        <span *ngIf="f.permissibleLightValue.errors.range">
          Permissible light value min value is {{f.permissibleLightValue.errors.data.minValue}}.
        </span>
      </div>
      <div *ngIf="f.lightingSeconds.touched && f.lightingSeconds.errors">
        <span *ngIf="f.lightingSeconds.errors.required">
          Lighting seconds is required.
        </span>
        <span *ngIf="f.lightingSeconds.errors.range">
          Lighting seconds min value is {{f.lightingSeconds.errors.data.minValue}}.
        </span>
      </div>
    </div>
    <mat-dialog-actions>
      <button
      (click)="cancel()"
      cdkFocusInitial 
      mat-flat-button 
      color="warn"
      >
        {{cancelButtonLabel}}
      </button>
      <button
      (click)="submit()"
      cdkFocusInitial 
      mat-flat-button
      color="primary"
      >
        {{submitButtonLabel}}      
      </button>
    </mat-dialog-actions>
  </ng-template>
</form>